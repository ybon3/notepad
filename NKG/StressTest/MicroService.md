Micro-Service 壓測初步檢討
==========================

- 使用本機筆電進行測試，規格：
  - CPU Intel i7-5500U @ 2.4G
  - RAM 16G
  - Windows 7 64-bit

- 使用 Apache 2.4.35 win64 VC15 內的 abs 進行測試

首先，為了證明使用本機筆電足以應付壓測所需的資源，所以將 API 的功能修改為不做任何事情直接 response  
以 -c 270 -n 10000 進行測試時僅需 22.415 秒完成，並且沒有任何失敗。

**以下以 50 個同時在線使用者，進行 1,000 次 request 做為討論前提（除非有特別說明）**
<br/><br/>

1. Order Filter API （region=TWN、merchant_id=tester）：
	- 從實測結果來看，失敗率接近五成
	- 此 API 的行為主要分三個階段：
		a. 資料庫查詢
		b. 完善查詢結果所需的資訊
		c. 轉換成回傳資訊
		
	- b 項由於沒有其他的子表需要再帶出，所以可以無視
	- a 項隨著同時在線使用者多寡，單筆的回傳效率會有明顯差異
	- c 項目前測試沒有效能瓶頸，大約都在 100 ms 內（-c 270 -n 10000 taken ）
	- 已跟 Eric 確認過，此測試區的 DB 是最低等級
	- 結論：
		效率會因為單一時間內的使用者多寡，直接影響到資料庫存取的反應效率，
		本 API 的查詢單次執行時平均約 1.5 秒，但依照資料庫當下的負載程度，
		可能會需要超過 40 秒，此情況會導致單一的 request 佔用 DB connection 時間過長，
		進而使其他 request waiting connection timeout，最終產生 request failed。
	
